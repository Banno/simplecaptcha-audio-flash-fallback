package com.banno.captcha{import flash.display.DisplayObject;import flash.display.Loader;import flash.display.Sprite;	import flash.events.Event;	import flash.media.Sound;	import flash.utils.ByteArray;	import org.as3wavsound.WavSound;	import org.as3wavsound.WavSoundChannel;	import flash.display.MovieClip;	import flash.events.MouseEvent;	import flash.net.URLLoader;	import flash.net.URLRequest;	import flash.net.URLLoaderDataFormat;	import org.as3wavsound.sazameki.core.AudioSetting;		public class Player extends Sprite {        [Embed(source="../../../Speaker_Icon.svg")]        private var SvgButton:Class        private var button: DisplayObject;		public function Player():void {            var iconUrl: String = this.loaderInfo.parameters['icon'];            if(iconUrl){                var btnLoader = new Loader();                btnLoader.load(new URLRequest(iconUrl))                btnLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onIconComplete)                button = btnLoader;            }else{                button = new SvgButton                addButton();            }            button.addEventListener(MouseEvent.CLICK, onPlayClicked, false, 0, false);		}        private function onIconComplete(e:Event):void{            addButton();        }        private function addButton():void{            button.scaleX = button.scaleY = Math.min((stage.stageWidth - 3) / button.width, (stage.stageHeight - 3) / button.height)            this.addChild(button);        }				var bytes:URLLoader = null;		var captcha : WavSound;				public function onPlayClicked(me:MouseEvent):void{			if(!bytes){				var audioFile = this.loaderInfo.parameters['audiofile'];				bytes = new URLLoader();				bytes.dataFormat = URLLoaderDataFormat.BINARY;				bytes.addEventListener(Event.COMPLETE, onAudioFileComplete, false, 0, true);				bytes.load(new URLRequest(audioFile));			}else if(captcha){				playFile();			}		}				public function onAudioFileComplete(e:Event):void{			captcha = new WavSound(bytes.data as ByteArray, new AudioSetting(1, 16000, 16));			playFile();		}				var currentPlaying = null;		public function playFile():void{			if(currentPlaying){				currentPlaying.stop();			}			currentPlaying = captcha.play(0, 0);		}	}}